tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
pal_AlltoCL <- c("#BDBDBD", "#7FCDBB", "#F1A340", "#B2182B")# ok muttei huippuhyvä
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
pal_AlltoCL <- c("#A6CEE3", "#C0A2C7", "#FFA500", "#B2DF8A") #ovatko liian erilaiset?
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
pal_AlltoCL <- c("#e0e0e0", "#9CE2D5", "#6DCBD6", "#3B567A")
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
tmap_save(plt_protein_and_kcal_AlltoCL_recoded_fixed,
here("del2", "test1.png"))
pal_AlltoCL <- c("#A6CEE3", "#C0A2C7", "#FFA500", "#B2DF8A") #ovatko liian erilaiset?
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
tmap_save(plt_protein_and_kcal_AlltoCL_recoded_fixed,
here("del2", "test2.png"))
pal_AlltoCL <- c("#D3D3D3", "#FEE08B", "#D97450", "#A50026") # ihan ok, punainen voisi olla hieman vähemmän hallitseva
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
pal_AlltoCL <- c("#C0C0C0", "#FEE08B", "#FC8D59", "#D73027") # varmaankin ihan hyvä
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
tmap_save(plt_protein_and_kcal_AlltoCL_recoded_fixed,
here("del2", "test3.png"))
pal_AlltoCL <- c("#BDBDBD", "#7FCDBB", "#F1A340", "#B2182B")# ok muttei huippuhyvä
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
pal_AlltoCL <- c("#D3D3D3", "#FEE08B", "#D97450", "#A50026") # ihan ok, punainen voisi olla hieman vähemmän hallitseva
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
tmap_save(plt_protein_and_kcal_AlltoCL_recoded_fixed,
here("del2", "test4.png"))
pal_AlltoCL <- c("#c9c9c9", "#B5F0E7", "#5CB6C3", "#34496E")
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
tmap_save(plt_protein_and_kcal_AlltoCL_recoded_fixed,
here("del2", "test2.png"))
pal_AlltoCL <- c("#d3d3d3", "#C0F8F0", "#5CB6C3", "#2F3F61")
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
tmap_save(plt_protein_and_kcal_AlltoCL_recoded_fixed,
here("del2", "test3.png"))
pal_AlltoCL <- c("#d3d3d3", "#C0F8F0", "#47C9AF", "#2F3F61")
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
tmap_save(plt_protein_and_kcal_AlltoCL_recoded_fixed,
here("del2", "test4.png"))
breaknames_updated <- c("< 2 (no potential)",
"2-5",
"5-10",
"> 10")
#scico(3, palette = "turku", begin = 0.2, end = 0.95, direction = -1)
pal_AlltoGL <- c("#d3d3d3", "#FFD8D6", "#AF9C68", "#3B3B32") # More GL = red
#pal_AlltoCL <- c("#e0e0e0", "#9CE2D5", "#6DCBD6", "#3B567A")
#pal_AlltoCL_AlltoGL <- c("#e0e0e0", "#9CE2D5",  "#cc6633",  "#6DCBD6", "#3B567A")
#pal_AlltoCL <- scico(4, palette = "bilbao", begin = 0.2, end = 0.95, direction = -1) #
#pal_AlltoCL <- c("#E8E8E8", "#C8B48D", "#8A6242", "#A3474B")
pal_AlltoCL <- c("#d3d3d3", "#C0F8F0", "#5CB6C3", "#2F3F61")
#scales::show_col(pal_AlltoCL)
pal_AlltoCL_AlltoGL <- c("#d3d3d3", "#C0F8F0",  "#3B3B32",  "#5CB6C3", "#2F3F61")
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
# All to GL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoGL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoGL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoGL,
breakvals = c(-Inf, 6, 8, 12, Inf),
breaknames = breaknames_updated))
# Combined map of AlltoCL & AlltoGL - including 21/27 nutrients
#unique(AlltoCL_AlltoGL_combined_nutrients_considered_recode)
# -555 = no potential, 1 = moderate potential in AlltoCL scenario,
# 13 = very high potential in AlltoGL, 777 = high potential in AlltoCL,
# 10000 = very high potential in AlltoCL
(plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode <-
create_index_map(r_index = AlltoCL_AlltoGL_combined_nutrients_considered_recode,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL_AlltoGL,
breakvals = c(-Inf, -554, 2, 14, 778, Inf),
breaknames = c("< 2 (no potential)",
"2-5, AlltoCL",
"> 2, AlltoGL",
"5-10, AlltoCL",
"> 10, AlltoCL")))
# Combined map, nutrients, SIgte33
(plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode_SI33 <-
create_index_map(r_index = AlltoCL_AlltoGL_combined_nutrients_considered_recode_SI33,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL_AlltoGL,
breakvals = c(-Inf, -554, 2, 14, 778, Inf),
breaknames = c("< 2 (no potential)",
"2-5, AlltoCL",
"> 2, AlltoGL",
"5-10, AlltoCL",
"> 10, AlltoCL")))
# Further, exluding conservation areas
(plt_AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas <-
create_index_map(r_index = AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL_AlltoGL,
breakvals = c(-Inf, -554, 2, 14, 778, Inf),
breaknames = c("< 2 (no potential)",
"2-5, AlltoCL",
"> 2, AlltoGL",
"5-10, AlltoCL",
"> 10, AlltoCL")))
# Combine
plts_fig4 <-
tmap_arrange(
plt_protein_and_kcal_AlltoCL_recoded_fixed,
plt_protein_and_kcal_AlltoGL_recoded_fixed,
plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode,
plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode_SI33,
plt_AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas,
ncol = 2
)
plts_fig4
# Save
tmap_save(plts_fig4, filename = here("Figures","Fig 4.pdf"))
scico(3, palette = "bilbao", begin = 0.2, end = 0.95, direction = -1)
scico(3, palette = "bilbao", begin = 0.2, end = 0.8, direction = -1)
scico(3, palette = "bilbao", begin = 0.2, end = 0.7, direction = -1)
breaknames_updated <- c("< 2 (no potential)",
"2-5",
"5-10",
"> 10")
#scico(3, palette = "bilbao", begin = 0.2, end = 0.7, direction = -1)
pal_AlltoGL <- c("#dbdbdb", "#B9AE81", "#A5785C", "#8D3F46") # More GL = red
#pal_AlltoCL <- c("#e0e0e0", "#9CE2D5", "#6DCBD6", "#3B567A")
#pal_AlltoCL_AlltoGL <- c("#e0e0e0", "#9CE2D5",  "#cc6633",  "#6DCBD6", "#3B567A")
#pal_AlltoCL <- scico(4, palette = "bilbao", begin = 0.2, end = 0.95, direction = -1) #
#pal_AlltoCL <- c("#E8E8E8", "#C8B48D", "#8A6242", "#A3474B")
pal_AlltoCL <- c("#dbdbdb", "#C0F8F0", "#5CB6C3", "#2F3F61")
#scales::show_col(pal_AlltoCL)
pal_AlltoCL_AlltoGL <- c("#dbdbdb", "#C0F8F0",  "#B9AE81",  "#5CB6C3", "#2F3F61")
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
# All to GL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoGL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoGL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoGL,
breakvals = c(-Inf, 6, 8, 12, Inf),
breaknames = breaknames_updated))
# Combined map of AlltoCL & AlltoGL - including 21/27 nutrients
#unique(AlltoCL_AlltoGL_combined_nutrients_considered_recode)
# -555 = no potential, 1 = moderate potential in AlltoCL scenario,
# 13 = very high potential in AlltoGL, 777 = high potential in AlltoCL,
# 10000 = very high potential in AlltoCL
(plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode <-
create_index_map(r_index = AlltoCL_AlltoGL_combined_nutrients_considered_recode,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL_AlltoGL,
breakvals = c(-Inf, -554, 2, 14, 778, Inf),
breaknames = c("< 2 (no potential)",
"2-5, AlltoCL",
"> 2, AlltoGL",
"5-10, AlltoCL",
"> 10, AlltoCL")))
# Combined map, nutrients, SIgte33
(plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode_SI33 <-
create_index_map(r_index = AlltoCL_AlltoGL_combined_nutrients_considered_recode_SI33,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL_AlltoGL,
breakvals = c(-Inf, -554, 2, 14, 778, Inf),
breaknames = c("< 2 (no potential)",
"2-5, AlltoCL",
"> 2, AlltoGL",
"5-10, AlltoCL",
"> 10, AlltoCL")))
# Further, exluding conservation areas
(plt_AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas <-
create_index_map(r_index = AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL_AlltoGL,
breakvals = c(-Inf, -554, 2, 14, 778, Inf),
breaknames = c("< 2 (no potential)",
"2-5, AlltoCL",
"> 2, AlltoGL",
"5-10, AlltoCL",
"> 10, AlltoCL")))
# Combine
plts_fig4 <-
tmap_arrange(
plt_protein_and_kcal_AlltoCL_recoded_fixed,
plt_protein_and_kcal_AlltoGL_recoded_fixed,
plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode,
plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode_SI33,
plt_AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas,
ncol = 2
)
plts_fig4
# Save
tmap_save(plts_fig4, filename = here("Figures","Fig 4.pdf"))
#    scico_palette_show()
pal_npp <- scico(n = 5,begin = 0.6, end = 1, palette = "corkO")
# scico(n = 6, palette = "bamako", direction = -1, begin = 0.5, end = 1)
pal_agb <- scico(n = 6, palette = "bamako", direction = -1)
# pal_protein <- scico(n = 10, palette = "hawaii", begin = 0.05,end = 0.85,
#                               direction = -1) # use lajolla instead!
pal_protein_lajolla <- scico(n = 6, palette = "lajolla", begin = 0.15, end = 1, direction = -1) # previously ended 0.85
pal_share_nuuk <- scico(n = 7, palette = "nuuk",  direction = -1)
pal_fcr <- scico(n = 6, palette = "tokyo", direction = -1)
pal_fcr <-c("#C6DBEF", "#6BAED6", "#4292C6", "#2171B5", "#08519C", "#08306B") # maybe more clear
pal_cv <-  scico(n = 6, palette = "nuuk", direction = -1)
# test
# pal_protein_test <-
#   c("#66c2a5", "#a6d854", "#fee08b", "#fdae61", "#f46d43", "#d53e4f")
pal_share <-
scico(n = 6, palette = "roma", begin = 0.15, end = 0.85, direction = -1)
pal_lur <- scico(n =5, palette = "imola", direction = -1, begin = 0.15, end = 0.99)
# function for plotting -- raster downsample = 0 or false
create_index_map <- function(r_index, index_label,index_main_title,
colorpal, breakvals,
breaknames = NULL,
color_midpoint = NULL, tocrs = NA, colorNA = NULL){
if (!is.na(tocrs)){
r_index <- project(r_index, tocrs, mask = TRUE)
}
index_map <- tm_shape(r_index,
raster.downsample = FALSE) + ###### or 0 instead?
tm_raster(palette = colorpal, # try style = "fixed",
breaks = breakvals,
labels = breaknames,
title = index_label,
midpoint = color_midpoint,
colorNA = colorNA,
legend.is.portrait = FALSE) + # added 9.8.22
#  legend.reverse = TRUE) + # deleted 9.8.22
tm_layout(main.title = index_main_title,
main.title.position = "center",
main.title.size = 1,
legend.bg.color = TRUE,
legend.outside = TRUE,
legend.title.size = 1,
legend.text.size = 1,
legend.outside.size = 0.2,
legend.outside.position = "bottom", # added 9,8
frame = FALSE)+
tm_shape(adm10_simple_faoadded_rob) + # was reg_rob_simple
tm_borders(col = NA,  lwd = 0.15)  # lwd was 0.33, col was "grey30",
return (index_map)
}
# Define the function to save tmap images to spesific folder
# i = index of the layer in the list
# !! Note that nameLayers changes too!
f_save_pngs <- function(i, fig_folder) {
# Create the directory if it doesn't exist
if (!dir.exists(here("Figures", fig_folder))) {
dir.create(here("Figures", fig_folder), recursive = TRUE)
}
# Generate the plot and save it
p_fig <- layers[[i]] + tm_layout(legend.show = FALSE)
tmap_save(p_fig,
filename = here("Figures", fig_folder, paste0('fig_', nameLayers[i], '.png')),
width = 110, units = 'mm', dpi = 450)
}
breaknames_updated <- c("< 2 (no potential)",
"2-5",
"5-10",
"> 10")
#scico(3, palette = "bilbao", begin = 0.2, end = 0.7, direction = -1)
pal_AlltoGL <- c("#DADADA", "#B9AE81", "#A5785C", "#8D3F46") # More GL = red
#pal_AlltoCL <- c("#e0e0e0", "#9CE2D5", "#6DCBD6", "#3B567A")
#pal_AlltoCL_AlltoGL <- c("#e0e0e0", "#9CE2D5",  "#cc6633",  "#6DCBD6", "#3B567A")
#pal_AlltoCL <- scico(4, palette = "bilbao", begin = 0.2, end = 0.95, direction = -1) #
#pal_AlltoCL <- c("#E8E8E8", "#C8B48D", "#8A6242", "#A3474B")
pal_AlltoCL <- c("#DADADA", "#C0F8F0", "#5CB6C3", "#2F3F61")
#scales::show_col(pal_AlltoCL)
pal_AlltoCL_AlltoGL <- c("#DADADA", "#C0F8F0",  "#B9AE81",  "#5CB6C3", "#2F3F61")
# All to CL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoCL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoCL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL,
breakvals = c(-Inf, -554, 2, 778, Inf),
breaknames = breaknames_updated))
# All to GL - protein and kcals - no nutrients mask
(plt_protein_and_kcal_AlltoGL_recoded_fixed <-
create_index_map(r_index = protein_and_kcal_AlltoGL_recoded_fixed,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoGL,
breakvals = c(-Inf, 6, 8, 12, Inf),
breaknames = breaknames_updated))
# Combined map of AlltoCL & AlltoGL - including 21/27 nutrients
#unique(AlltoCL_AlltoGL_combined_nutrients_considered_recode)
# -555 = no potential, 1 = moderate potential in AlltoCL scenario,
# 13 = very high potential in AlltoGL, 777 = high potential in AlltoCL,
# 10000 = very high potential in AlltoCL
(plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode <-
create_index_map(r_index = AlltoCL_AlltoGL_combined_nutrients_considered_recode,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL_AlltoGL,
breakvals = c(-Inf, -554, 2, 14, 778, Inf),
breaknames = c("< 2 (no potential)",
"2-5, AlltoCL",
"> 2, AlltoGL",
"5-10, AlltoCL",
"> 10, AlltoCL")))
# Combined map, nutrients, SIgte33
(plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode_SI33 <-
create_index_map(r_index = AlltoCL_AlltoGL_combined_nutrients_considered_recode_SI33,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL_AlltoGL,
breakvals = c(-Inf, -554, 2, 14, 778, Inf),
breaknames = c("< 2 (no potential)",
"2-5, AlltoCL",
"> 2, AlltoGL",
"5-10, AlltoCL",
"> 10, AlltoCL")))
# Further, exluding conservation areas
(plt_AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas <-
create_index_map(r_index = AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas,
tocrs = "ESRI:54030",
index_main_title = "",
index_label = "",
colorpal = pal_AlltoCL_AlltoGL,
breakvals = c(-Inf, -554, 2, 14, 778, Inf),
breaknames = c("< 2 (no potential)",
"2-5, AlltoCL",
"> 2, AlltoGL",
"5-10, AlltoCL",
"> 10, AlltoCL")))
# Combine
plts_fig4 <-
tmap_arrange(
plt_protein_and_kcal_AlltoCL_recoded_fixed,
plt_protein_and_kcal_AlltoGL_recoded_fixed,
plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode,
plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode_SI33,
plt_AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas,
ncol = 2
)
plts_fig4
# Save
tmap_save(plts_fig4, filename = here("Figures","Fig 4.pdf"))
tmap_save(plts_fig4, filename = here("Figures","Fig 4.png"))
# Testing! Matin koodi
# Luo kansio Fig4 Figures-kansion sisään, jos sitä ei ole olemassa
# if (!dir.exists(here("Figures", "Fig4"))) {
#   dir.create(here("Figures", "Fig4"))
# }
# Määritä kartat ja niiden nimet
layers <- list(
plt_protein_and_kcal_AlltoCL_recoded_fixed,
plt_protein_and_kcal_AlltoGL_recoded_fixed,
plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode,
plt_combined_AlltoCL_AlltoGL_nutrients_considered_recode_SI33,
plt_AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas
)
nameLayers <- c(
'protein_and_kcal_AlltoCL',
'protein_and_kcal_AlltoGL',
'combined_nutrients',
'combined_nutrients_SIgte33',
'combined_nutrients_SIgte33_conserv_areas'
)
# # Luo ja tallenna kuvat käyttäen for-silmukkaa
# for (i in 1:length(layers)) {
#   p_fig <- layers[[i]] + tm_layout(legend.show = FALSE)
#   tmap_save(p_fig, filename = here("Figures", "Fig4", paste0('fig_', nameLayers[i], '.png')), width = 110, units = 'mm', dpi = 450)
# }
map(1:length(layers), ~f_save_pngs(.x, "Fig4"))
r_new_protein_production_kg_perpix_0toNA <-
classify(r_new_protein_production_kg_perpix, cbind(0, NA))
r_new_protein_production_area <-
cellSize(r_new_protein_production_kg_perpix_0toNA, unit ="ha") *
r_fraction_gl_0toNA |>
mask(r_new_protein_production_kg_perpix_0toNA)
plot(r_new_protein_production_area, main = "Area in ha of new protein production")
global(r_new_protein_production_area, "sum", na.rm=T)/1e6 # 1406.914 Mha
global(r_new_protein_production_area, "sum", na.rm=T)/1e6 # 1406.914 Mha
AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas
plot(r_new_protein_production_area_outside_cons_areas,
main = "Area in ha of new protein production, SIgte33, outside conservation areas")
plot(r_new_protein_production_area_SIgte33_outside_cons_areas,
main = "Area in ha of new protein production, SIgte33, outside conservation areas")
######################################################## SIgte33 & outside cons regions
r_new_protein_production_area_SIgte33_outside_cons_areas <-
cellSize(r_new_protein_production_kg_perpix_0toNA, unit ="ha") *
r_fraction_gl_0toNA |>
mask(ifel(AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas != -555,
AlltoCL_AlltoGL_combined_nutrients_SI33_conserv_areas,
NA) )
plot(r_new_protein_production_area_SIgte33_outside_cons_areas,
main = "Area in ha of new protein production, SIgte33, outside conservation areas")
global(r_new_protein_production_area_SIgte33_outside_cons_areas, "sum", na.rm=T)/1e6 # 545.8312	 Mha
# Interpretation:
# If considering SIgte33 areas and conservation areas, the total area that could be converted to protein production is 359 million hectares
# ----> how much is this in relation to the total gl area of 3151.204?
358.5606		/ 3151.204 # 17% of all grazing lands, thus 83% of all grazing lands are not likely to benefit significantly from the conversion
