---
title: "FAOSTAT food nutritients"
author: "Johannes Piipponen"
date: "`r Sys.Date()`"
output: html_document
---

# Find data relevant for us

```{r}
library(readxl, quietly = T) 
nutritients <- read_excel(
    here("Data", "Input", "faostat", "Nutritive_Factors.xlsx"))


## modify cols
nutritients <- nutritients %>% 
  mutate(kcalPerKg = calories_per100g * 10,
         protein_fraction = protein_mgper1g/1000) %>% 
  dplyr::select(-fat_mgper1g)


nutritients %>%  filter(str_detect(COMMODITY, "RICE")) %>% dplyr::select(COMMODITY)

## create a list for filtering
mylist_nutritients <- c(
  "WHEAT", "MILLED/HUSKED RICE", "BARLEY", "MAIZE", "MILLET",
  "SORGHUM", "CEREALS NES", "CASSAVA", "POTATOES", "SWEET POTATO", 
  "ROOTS AND TUBERS NES", "BEANS DRY", "PEAS DRY", "PULSES NES",
  "SOYBEANS", "GROUNDNUTS", "COCONUTS", "VEGETABLES FRESH NES", "BANANAS",
  "PLANTAINS", "YAMS" ) # 21

nutritients <- nutritients %>% 
  filter(COMMODITY %in% mylist_nutritients) # 21



#

# Extract list we will use when filtering
# my_itemlist_fao_toupper <- str_extract(my_itemlist_fao, "^\\w+") %>% 
#   toupper()



# nutritients3 <-nutritients %>%
#   filter(str_detect(COMMODITY, paste(my_itemlist_fao_toupper, collapse = "|"))) # 87
```

